FOEDSELSDATO = as.Date("20230101", "%Y%m%d")
trunc(lubridate::interval(FOEDSELSDATO, as.Date(paste0(aargang-1, "-12-31"))) / lubridate::years(1))
# FOEDSELSDATO = as.Date("20221231", "%Y%m%d") # = 0
FOEDSELSDATO = as.Date("20220101", "%Y%m%d")
trunc(lubridate::interval(FOEDSELSDATO, as.Date(paste0(aargang-1, "-12-31"))) / lubridate::years(1))
# FOEDSELSDATO = as.Date("20221231", "%Y%m%d") # = 0
FOEDSELSDATO = as.Date("20211231", "%Y%m%d")
trunc(lubridate::interval(FOEDSELSDATO, as.Date(paste0(aargang-1, "-12-31"))) / lubridate::years(1))
# SOM
opptaksomrader_SOM_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_2022.parquet") %>%
sf::st_transform(4326)
SUM(opptaksomrader_SOM_RHF$PERSONER)
sum(opptaksomrader_SOM_RHF$PERSONER)
opptaksomrader_SOM_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_HF_2022.parquet") %>%
sf::st_transform(4326)
sum(opptaksomrader_SOM_HF$PERSONER)
opptaksomrader_SOM_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_SOM_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_HF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_SOM_lokasjon <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_lokasjon_2022.parquet") %>%
sf::st_transform(4326)
# PHV
opptaksomrader_PHV_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_PHV_RHF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_PHV_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_PHV_HF_2022.parquet") %>%
sf::st_transform(4326)
# TSB
opptaksomrader_TSB_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_TSB_RHF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_TSB_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_TSB_HF_2022.parquet") %>%
sf::st_transform(4326)
# DPS
opptaksomrader_DPS_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_RHF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_DPS_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_HF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_DPS_DPS <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_DPS_2022.parquet") %>%
sf::st_transform(4326)
# SOM
opptaksomrader_SOM_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_SOM_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_HF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_SOM_lokasjon <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_lokasjon_2022.parquet") %>%
sf::st_transform(4326)
# PHV
opptaksomrader_PHV_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_PHV_RHF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_PHV_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_PHV_HF_2022.parquet") %>%
sf::st_transform(4326)
# TSB
opptaksomrader_TSB_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_TSB_RHF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_TSB_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_TSB_HF_2022.parquet") %>%
sf::st_transform(4326)
# DPS
opptaksomrader_DPS_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_RHF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_DPS_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_HF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_DPS_DPS <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_DPS_2022.parquet") %>%
sf::st_transform(4326)
sum(opptaksomrader_SOM_RHF$PERSONER)
sum(opptaksomrader_SOM_HF$PERSONER)
sum(opptaksomrader_SOM_lokasjon$PERSONER)
sum(opptaksomrader_PHV_RHF$PERSONER)
sum(opptaksomrader_PHV_HF$PERSONER)
sum(opptaksomrader_TSB_RHF$PERSONER)
sum(opptaksomrader_TSB_HF$PERSONER)
sum(opptaksomrader_DPS_RHF$PERSONER)
sum(opptaksomrader_DPS_HF$PERSONER)
sum(opptaksomrader_DPS_DPS$PERSONER)
# Laster inn kart
opptaksomrader_SOM_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrader/opptaksomrader_SOM_RHF_utenhav_2022.parquet")
sum(opptaksomrader_SOM_RHF$PERSONER)
opptaksomrader_KLASS <- klassR::GetKlass(632, output_style = "wide", date = c(paste0(aargang, "-01-01"))) %>%
dplyr::rename(GRUNNKRETSNUMMER = code4,
GRUNNKRETS_NAVN = name4,
OPPTAK_NUMMER = code3,
OPPTAK = name3,
ORGNR_HF = code2,
NAVN_HF = name2,
ORGNR_RHF = code1,
NAVN_RHF = name1)
library(tidyverse)
opptaksomrader_KLASS <- klassR::GetKlass(632, output_style = "wide", date = c(paste0(aargang, "-01-01"))) %>%
dplyr::rename(GRUNNKRETSNUMMER = code4,
GRUNNKRETS_NAVN = name4,
OPPTAK_NUMMER = code3,
OPPTAK = name3,
ORGNR_HF = code2,
NAVN_HF = name2,
ORGNR_RHF = code1,
NAVN_RHF = name1)
aargang <- 2022
opptaksomrader_KLASS <- klassR::GetKlass(632, output_style = "wide", date = c(paste0(aargang, "-01-01"))) %>%
dplyr::rename(GRUNNKRETSNUMMER = code4,
GRUNNKRETS_NAVN = name4,
OPPTAK_NUMMER = code3,
OPPTAK = name3,
ORGNR_HF = code2,
NAVN_HF = name2,
ORGNR_RHF = code1,
NAVN_RHF = name1)
library(tidyverse)
aargang <- 2022
opptaksomrader_KLASS <- klassR::GetKlass(632, output_style = "wide", date = c(paste0(aargang, "-01-01"))) %>%
dplyr::rename(GRUNNKRETSNUMMER = code4,
GRUNNKRETS_NAVN = name4,
OPPTAK_NUMMER = code3,
OPPTAK = name3,
ORGNR_HF = code2,
NAVN_HF = name2,
ORGNR_RHF = code1,
NAVN_RHF = name1)
opptaksomrader_KLASS <- klassR::GetKlass(629, output_style = "wide", date = c(paste0(aargang-1, "-01-01"))) %>%
dplyr::rename(GRUNNKRETSNUMMER = code4,
GRUNNKRETS_NAVN = name4,
OPPTAK_NUMMER = code3,
OPPTAK = name3,
ORGNR_HF = code2,
NAVN_HF = name2,
ORGNR_RHF = code1,
NAVN_RHF = name1)
opptaksomrader_KLASS <- klassR::GetKlass(629, output_style = "wide", date = c(paste0(aargang-1, "-01-01"))) %>%
dplyr::rename(GRUNNKRETSNUMMER = code4,
GRUNNKRETS_NAVN = name4,
OPPTAK_NUMMER = code3,
OPPTAK = name3,
ORGNR_HF = code2,
NAVN_HF = name2,
ORGNR_RHF = code1,
NAVN_RHF = name1)
aargang <- 2023
opptaksomrader_KLASS <- klassR::GetKlass(629, output_style = "wide", date = c(paste0(aargang-1, "-01-01"))) %>%
dplyr::rename(GRUNNKRETSNUMMER = code4,
GRUNNKRETS_NAVN = name4,
OPPTAK_NUMMER = code3,
OPPTAK = name3,
ORGNR_HF = code2,
NAVN_HF = name2,
ORGNR_RHF = code1,
NAVN_RHF = name1)
aargang <- 2023
opptaksomrader_KLASS <- klassR::GetKlass(629, output_style = "wide", date = c(paste0(aargang-1, "-01-01"))) %>%
dplyr::rename(GRUNNKRETSNUMMER = code4,
GRUNNKRETS_NAVN = name4,
OPPTAK_NUMMER = code3,
OPPTAK = name3,
ORGNR_HF = code2,
NAVN_HF = name2,
ORGNR_RHF = code1,
NAVN_RHF = name1)
opptaksomrader_KLASS <- klassR::GetKlass(629, output_style = "wide", date = c(paste0(aargang-1, "-01-01")))
library(tidyverse)
library(sf)
library(arrow)
library(sfarrow)
# Laster inn kart
opptaksomrader_SOM_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrader/opptaksomrader_SOM_RHF_utenhav_2022.parquet")
# Forenkler geometrien
opptaksomrader_SOM_RHF_simpl <- sf::st_simplify(opptaksomrader_SOM_RHF, preserveTopology = FALSE, dTolerance = 1000)
# Sjekker størrelse på objektene
pryr::object_size(opptaksomrader_SOM_RHF)
pryr::object_size(opptaksomrader_SOM_RHF_simpl)
opptaksomrader_SOM_RHF_simpl_4326 <- opptaksomrader_SOM_RHF_simpl %>%
sf::st_transform(4326)
ssb_farger <- klassR::GetKlass(614, output_style = "wide") %>%
dplyr::rename(farge_nummer = code3,
HEX = name3,
farge = name2,
type = name1) %>%
dplyr::select(-code1, -code2) %>%
dplyr::filter(farge != "Hvit")
pal_RHF <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_SOM_RHF_simpl_4326$NAVN_RHF))
opptaksomrader_SOM_RHF_leaflet <- leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_SOM_RHF_simpl_4326,
weight = 1,
fillColor = pal_RHF(opptaksomrader_SOM_RHF_simpl_4326$NAVN_RHF),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_SOM_RHF_simpl_4326$NAVN_RHF, " / Befolkning: ", prettyNum(opptaksomrader_SOM_RHF_simpl_4326$PERSONER, big.mark = " ", scientific = FALSE))) %>%
leaflet::addLegend("bottomright", pal = pal_RHF, values = as.factor(opptaksomrader_SOM_RHF_simpl_4326$NAVN_RHF), opacity = 1)
opptaksomrader_SOM_RHF_leaflet
# Laster inn deler av kart
opptaksomrader_DPS_DPS_subset <- arrow::open_dataset("C:/Users/rdn/Documents/Kart/Opptaksomrader/opptaksomrader_DPS_DPS_utenhav_2022.parquet") %>%
dplyr::filter(OPPTAK %in% c("Solvang", "Strømme")) %>%
sfarrow::read_sf_dataset()
opptaksomrader_DPS_DPS_subset_4326 <- opptaksomrader_DPS_DPS_subset %>%
sf::st_transform(4326)
ssb_farger <- klassR::GetKlass(614, output_style = "wide") %>%
dplyr::rename(farge_nummer = code3,
HEX = name3,
farge = name2,
type = name1) %>%
dplyr::select(-code1, -code2) %>%
dplyr::filter(farge != "Hvit")
pal_RHF <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_DPS_DPS_subset_4326$NAVN_RHF))
opptaksomrader_DPS_DPS_leaflet <- leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_DPS_DPS_subset_4326,
weight = 1,
fillColor = pal_RHF(opptaksomrader_DPS_DPS_subset_4326$NAVN_RHF),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_DPS_DPS_subset_4326$NAVN_RHF, " / Befolkning: ", prettyNum(opptaksomrader_DPS_DPS_subset_4326$PERSONER, big.mark = " ", scientific = FALSE))) %>%
leaflet::addLegend("bottomright", pal = pal_RHF, values = as.factor(opptaksomrader_DPS_DPS_subset_4326$NAVN_RHF), opacity = 1)
opptaksomrader_DPS_DPS_leaflet
pal_RHF <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_DPS_DPS_subset_4326$OPPTAK))
opptaksomrader_DPS_DPS_leaflet <- leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_DPS_DPS_subset_4326,
weight = 1,
fillColor = pal_RHF(opptaksomrader_DPS_DPS_subset_4326$OPPTAK),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_DPS_DPS_subset_4326$OPPTAK, " / Befolkning: ", prettyNum(opptaksomrader_DPS_DPS_subset_4326$PERSONER, big.mark = " ", scientific = FALSE))) %>%
leaflet::addLegend("bottomright", pal = pal_RHF, values = as.factor(opptaksomrader_DPS_DPS_subset_4326$OPPTAK), opacity = 1)
opptaksomrader_DPS_DPS_leaflet
# Laster inn deler av kart
opptaksomrader_SOM_RHF_subset <- arrow::open_dataset("C:/Users/rdn/Documents/Kart/Opptaksomrader/opptaksomrader_SOM_RHF_utenhav_2022.parquet") %>%
dplyr::filter(NAVN_RHF == "HELSE SØR-ØST RHF") %>%
sfarrow::read_sf_dataset()
Sys.setlocale(locale='no_NB.utf8')
# Laster inn deler av kart
opptaksomrader_DPS_DPS_subset <- arrow::open_dataset("C:/Users/rdn/Documents/Kart/Opptaksomrader/opptaksomrader_DPS_DPS_utenhav_2022.parquet") %>%
dplyr::filter(OPPTAK %in% c("Solvang", "Strømme")) %>%
sfarrow::read_sf_dataset()
opptaksomrader_DPS_DPS_subset_4326 <- opptaksomrader_DPS_DPS_subset %>%
sf::st_transform(4326)
ssb_farger <- klassR::GetKlass(614, output_style = "wide") %>%
dplyr::rename(farge_nummer = code3,
HEX = name3,
farge = name2,
type = name1) %>%
dplyr::select(-code1, -code2) %>%
dplyr::filter(farge != "Hvit")
pal_RHF <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_DPS_DPS_subset_4326$OPPTAK))
opptaksomrader_DPS_DPS_leaflet <- leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_DPS_DPS_subset_4326,
weight = 1,
fillColor = pal_RHF(opptaksomrader_DPS_DPS_subset_4326$OPPTAK),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_DPS_DPS_subset_4326$OPPTAK, " / Befolkning: ", prettyNum(opptaksomrader_DPS_DPS_subset_4326$PERSONER, big.mark = " ", scientific = FALSE))) %>%
leaflet::addLegend("bottomright", pal = pal_RHF, values = as.factor(opptaksomrader_DPS_DPS_subset_4326$OPPTAK), opacity = 1)
opptaksomrader_DPS_DPS_leaflet
# Laster inn deler av kart
opptaksomrader_DPS_DPS_subset <- arrow::open_dataset("C:/Users/rdn/Documents/Kart/Opptaksomrader/opptaksomrader_DPS_DPS_utenhav_2022.parquet") %>%
dplyr::filter(OPPTAK %in% c("Nidelv", "Nidaros")) %>%
sfarrow::read_sf_dataset()
opptaksomrader_DPS_DPS_subset_4326 <- opptaksomrader_DPS_DPS_subset %>%
sf::st_transform(4326)
ssb_farger <- klassR::GetKlass(614, output_style = "wide") %>%
dplyr::rename(farge_nummer = code3,
HEX = name3,
farge = name2,
type = name1) %>%
dplyr::select(-code1, -code2) %>%
dplyr::filter(farge != "Hvit")
pal_RHF <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_DPS_DPS_subset_4326$OPPTAK))
opptaksomrader_DPS_DPS_leaflet <- leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_DPS_DPS_subset_4326,
weight = 1,
fillColor = pal_RHF(opptaksomrader_DPS_DPS_subset_4326$OPPTAK),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_DPS_DPS_subset_4326$OPPTAK, " / Befolkning: ", prettyNum(opptaksomrader_DPS_DPS_subset_4326$PERSONER, big.mark = " ", scientific = FALSE))) %>%
leaflet::addLegend("bottomright", pal = pal_RHF, values = as.factor(opptaksomrader_DPS_DPS_subset_4326$OPPTAK), opacity = 1)
opptaksomrader_DPS_DPS_leaflet
akuttmottak <- readxl::read_excel("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/Akuttmottak.xlsx")
View(akuttmottak)
akuttmottak <- readxl::read_excel("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/Akuttmottak.xlsx") %>%
sf::st_as_sf(coords = c("lon", "lat"), crs = 4258) %>%
sf::st_transform(crs = 4326)
librrary(sf)
library(tidyverse)
library(tidyverse)
library(sf)
akuttmottak <- readxl::read_excel("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/Akuttmottak.xlsx") %>%
sf::st_as_sf(coords = c("lon", "lat"), crs = 4258) %>%
sf::st_transform(crs = 4326)
View(akuttmottak)
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addMarkers(data = akuttmottak$geometry)
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addMarkers(data = akuttmottak$geometry, popup = "test")
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addMarkers(data = akuttmottak$geometry, popup = akuttmottak$OPPTAK)
View(akuttmottak)
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addMarkers(data = akuttmottak$geometry, popup = akuttmottak$NAVN_BEDRIFT)
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addMarkers(data = akuttmottak$geometry, popup = paste0("Akuttmottak: ", akuttmottak$NAVN_BEDRIFT))
View(akuttmottak)
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addMarkers(data = akuttmottak$geometry, popup = paste0("Akuttmottak: ", akuttmottak$NAVN_BEDRIFT, " / Adresse: ", akuttmottak$address, ", ", akuttmottak$zip_code))
test <- klassR::GetKlass(1, output_style = "wide", date = c(paste0(aargang-1, "-01-01"))
test <- klassR::GetKlass(1, output_style = "wide", date = c(paste0(aargang-1, "-01-01")))
test <- klassR::GetKlass(1, output_style = "wide", date = c(paste0(aargang-1, "-01-01")))
aargang <- 2023
test <- klassR::GetKlass(1, output_style = "wide", date = c(paste0(aargang-1, "-01-01")))
aargang <- 2023
test <- klassR::GetKlass(1, output_style = "wide", date = c(paste0(aargang-1, "-01-01")))
aargang <- 2023
test <- klassR::GetKlass(1, output_style = "wide", date = c(paste0(aargang-1, "-01-01")))
akuttmottak <- readxl::read_excel("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/Akuttmottak.xlsx") %>%
sf::st_as_sf(coords = c("lon", "lat"), crs = 4326)
leaflet::leaflet() %>%
leaflet::addTiles() %>%
leaflet::addMarkers(data = akuttmottak$geometry, popup = paste0("Akuttmottak: ", akuttmottak$NAVN_BEDRIFT,
" / Adresse: ", akuttmottak$address, ", ", akuttmottak$zip_code))
grunnkrets <- sf::read_sf("C:/Users/rdn/Downloads/Basisdata_0000_Norge_25833_Grunnkretser_FGDB/Basisdata_0000_Norge_25833_Grunnkretser_FGDB.gdb")
View(grunnkrets)
sf::st_layers("C:/Users/rdn/Downloads/Basisdata_0000_Norge_25833_Grunnkretser_FGDB/Basisdata_0000_Norge_25833_Grunnkretser_FGDB.gdb")
grunnkrets <- sf::read_sf("C:/Users/rdn/Downloads/Basisdata_0000_Norge_25833_Grunnkretser_FGDB/Basisdata_0000_Norge_25833_Grunnkretser_FGDB.gdb", layer = "grunnkrets")
View(grunnkrets)
library(tidyverse)
test <- grunnkrets %>%
filter(grunnkretsnummer == "30490112")
ggplot() %>%
geom_sf(data = test)
ggplot() +
geom_sf(data = test)
colnames(test)
View(test)
paste0("C:/Users/rdn/Documents/Kart/ABAS_grunnkrets_flate_", aargang, ".parquet")
aargang <- 2023
paste0("C:/Users/rdn/Documents/Kart/ABAS_grunnkrets_flate_", aargang, ".parquet")
sfarrow::st_write_parquet(obj=grunnkrets, dsn=paste0("C:/Users/rdn/Documents/Kart/ABAS_grunnkrets_flate_", aargang, ".parquet"))
head(test)
colnames(test)
test <- grunnkrets %>%
filter(grunnkretsnummer %in% c("30490112", "30490113", "30490114"))
test <- grunnkrets %>%
filter(grunnkretsnummer %in% c("30490112", "30490113", "30490114")) %>%
sf::st_transform(4326)
opptaksomrader_lokasjon_leaflet <- leaflet::leaflet(options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = test)
opptaksomrader_lokasjon_leaflet
ggplot() +
geom_sf(data = test)
test <- grunnkrets %>%
filter(grunnkretsnummer %in% c("30490112")) %>%
sf::st_transform(4326)
leaflet::leaflet(options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = test)
test <- grunnkrets %>%
filter(grunnkretsnummer %in% c("30490113")) %>%
sf::st_transform(4326)
leaflet::leaflet(options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = test)
test <- grunnkrets %>%
filter(grunnkretsnummer %in% c("30490114")) %>%
sf::st_transform(4326)
leaflet::leaflet(options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = test)
test <- grunnkrets %>%
filter(grunnkretsnummer %in% c("30490115")) %>%
sf::st_transform(4326)
leaflet::leaflet(options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = test)
test <- grunnkrets %>%
filter(grunnkretsnummer %in% c("30490116")) %>%
sf::st_transform(4326)
leaflet::leaflet(options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = test)
test <- grunnkrets %>%
filter(grunnkretsnummer %in% c("30490112")) %>%
sf::st_transform(4326)
leaflet::leaflet(options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = test)
###
sf::st_layers("C:/Users/rdn/Downloads/Basisdata_0000_Norge_25833_Postnummeromrader_FGDB (1)/Basisdata_0000_Norge_25833_Postnummeromrader_FGDB.gdb")
postnummer <- sf::read_sf("C:/Users/rdn/Downloads/Basisdata_0000_Norge_25833_Grunnkretser_FGDB/Basisdata_0000_Norge_25833_Grunnkretser_FGDB.gdb", layer = "postnummeromrade")
postnummer <- sf::read_sf("C:/Users/rdn/Downloads/Basisdata_0000_Norge_25833_Grunnkretser_FGDB/Basisdata_0000_Norge_25833_Grunnkretser_FGDB.gdb", layer = "postnummeromrade")
postnummer <- sf::read_sf("C:/Users/rdn/Downloads/Basisdata_0000_Norge_25833_Grunnkretser_FGDB/Basisdata_0000_Norge_25833_Grunnkretser_FGDB.gdb", layer = "postnummeromradegrense")
postnummer <- sf::read_sf("C:/Users/rdn/Downloads/Basisdata_0000_Norge_25833_Postnummeromrader_FGDB (1)/Basisdata_0000_Norge_25833_Postnummeromrader_FGDB.gdb", layer = "postnummeromrade")
View(postnummer)
colnames(postnummer)
sf::st_layers("C:/Users/rdn/Downloads/Basisdata_0000_Norge_25833_Postnummeromrader_FGDB (1)/Basisdata_0000_Norge_25833_Postnummeromrader_FGDB.gdb")
postnummer <- sf::read_sf("C:/Users/rdn/Downloads/Basisdata_0000_Norge_25833_Postnummeromrader_FGDB (1)/Basisdata_0000_Norge_25833_Postnummeromrader_FGDB.gdb", layer = "postnummeromrade")
postnummer <- postnummer %>%
dplyr::rename(POSTSTED = poststed,
DATAUTTAKS = datauttaksdato,
KOMMUNENR = kommune,
POSTNR = postnummer) %>%
dplyr::select(POSTSTED, DATAUTTAKS, KOMMUNENR, POSTNR, SHAPE_Length, SHAPE_Area)
View(postnummer)
aargang <- 2023
sfarrow::st_write_parquet(obj=grunnkrets, dsn=paste0("C:/Users/rdn/Documents/Kart/POST_postkretser_flate_", aargang, ".parquet"))
###
sf::st_layers("C:/Users/rdn/Downloads/Basisdata_0000_Norge_25833_Postnummeromrader_FGDB (1)/Basisdata_0000_Norge_25833_Postnummeromrader_FGDB.gdb")
postnummer <- sf::read_sf("C:/Users/rdn/Downloads/Basisdata_0000_Norge_25833_Postnummeromrader_FGDB (1)/Basisdata_0000_Norge_25833_Postnummeromrader_FGDB.gdb", layer = "postnummeromrade")
postnummer <- postnummer %>%
dplyr::rename(POSTSTED = poststed,
DATAUTTAKS = datauttaksdato,
KOMMUNENR = kommune,
POSTNR = postnummer) %>%
dplyr::select(POSTSTED, DATAUTTAKS, KOMMUNENR, POSTNR, SHAPE_Length, SHAPE_Area)
aargang <- 2023
sfarrow::st_write_parquet(obj=postnummer, dsn=paste0("C:/Users/rdn/Documents/Kart/POST_postkretser_flate_", aargang, ".parquet"))
aargang <- 2023
library(tidyverse)
# SOM
opptaksomrader_SOM_RHF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_", aargang, ".parquet")) %>%
sf::st_transform(4326)
aargang <- 2023
library(tidyverse)
# SOM
opptaksomrader_SOM_RHF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_", aargang, ".parquet")) %>%
sf::st_transform(4326)
# SOM
opptaksomrader_SOM_RHF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_flate", aargang, ".parquet")) %>%
sf::st_transform(4326)
paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_flate", aargang, ".parquet")
# SOM
opptaksomrader_SOM_RHF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
aargang <- 2023
library(tidyverse)
# SOM
opptaksomrader_SOM_RHF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
opptaksomrader_SOM_HF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_HF_flate_", aargang, ".parquet") %>%
opptaksomrader_SOM_lokasjon <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_lokasjon_flate_", aargang, ".parquet") %>%
aargang <- 2023
sdfoisdjofih&///(78asdfa)
aargang <- 2023
library(tidyverse)
# SOM
opptaksomrader_SOM_RHF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
opptaksomrader_SOM_HF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_HF_flate_", aargang, ".parquet") %>%
aargang <- 2023
library(tidyverse)
aargang <- 2023
library(tidyverse)
# SOM
opptaksomrader_SOM_RHF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
opptaksomrader_SOM_HF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_HF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
opptaksomrader_SOM_lokasjon <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_lokasjon_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
# PHV
opptaksomrader_PHV_RHF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_PHV_RHF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
opptaksomrader_PHV_HF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_PHV_HF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
# TSB
opptaksomrader_TSB_RHF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_TSB_RHF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
opptaksomrader_TSB_HF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_TSB_HF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
# DPS
opptaksomrader_DPS_RHF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_RHF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
opptaksomrader_DPS_HF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_HF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
opptaksomrader_DPS_DPS <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_DPS_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
aargang <- 2023
library(tidyverse)
# SOM
opptaksomrader_SOM_RHF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
sum(opptaksomrader_SOM_RHF$PERSONER)
opptaksomrader_SOM_HF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_HF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
sum(opptaksomrader_SOM_HF$PERSONER)
sum(opptaksomrader_SOM_lokasjon$PERSONER)
opptaksomrader_SOM_lokasjon <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_lokasjon_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
sum(opptaksomrader_SOM_lokasjon$PERSONER)
5488984-sum(opptaksomrader_SOM_lokasjon$PERSONER)
# PHV
opptaksomrader_PHV_RHF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_PHV_RHF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
5488984-sum(opptaksomrader_PHV_RHF$PERSONER)
opptaksomrader_PHV_HF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_PHV_HF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
5488984-sum(opptaksomrader_PHV_HF$PERSONER)
# TSB
opptaksomrader_TSB_RHF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_TSB_RHF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
5488984-sum(opptaksomrader_TSB_RHF$PERSONER)
opptaksomrader_TSB_HF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_TSB_HF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
5488984-sum(opptaksomrader_TSB_HF$PERSONER)
# DPS
opptaksomrader_DPS_RHF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_RHF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
5488984-sum(opptaksomrader_DPS_RHF$PERSONER)
opptaksomrader_DPS_HF <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_HF_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
5488984-sum(opptaksomrader_DPS_HF$PERSONER)
opptaksomrader_DPS_DPS <- sfarrow::st_read_parquet(paste0("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_DPS_flate_", aargang, ".parquet")) %>%
sf::st_transform(4326)
5488984-sum(opptaksomrader_DPS_DPS$PERSONER)
