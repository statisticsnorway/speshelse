opptaksomrader <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_2022.parquet")
ggplot() +
geom_sf(data = opptaksomrader)
library(tidyverse)
opptaksomrader <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_2022.parquet")
ggplot() +
geom_sf(data = opptaksomrader)
opptaksomrader_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_2022.parquet")
ggplot() +
geom_sf(data = opptaksomrader_RHF)
opptaksomrader_RHF_leaflet <- leaflet::leaflet(options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_RHF,
# color = "green",
weight = 1,
fillColor = pal_RHF(opptaksomrader_RHF$NAVN_RHF),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_RHF$NAVN_RHF, " / Befolkning: ", prettyNum(opptaksomrader_RHF$PERSONER, big.mark = " ", scientific = FALSE))) %>%
leaflet::addLegend("bottomright", pal = pal_RHF, values = as.factor(opptaksomrader_RHF$NAVN_RHF), opacity = 1)
pal_RHF <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_KLASS_2_kart$NAVN_RHF))
ssb_farger <- klassR::GetKlass(614, output_style = "wide") %>%
dplyr::rename(farge_nummer = code3,
HEX = name3,
farge = name2,
type = name1) %>%
dplyr::select(-code1, -code2) %>%
dplyr::filter(farge != "Hvit")
ggplot() +
geom_sf(data = opptaksomrader_RHF)
pal_RHF <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_RHF$NAVN_RHF))
opptaksomrader_RHF_leaflet <- leaflet::leaflet(options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_RHF,
# color = "green",
weight = 1,
fillColor = pal_RHF(opptaksomrader_RHF$NAVN_RHF),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_RHF$NAVN_RHF, " / Befolkning: ", prettyNum(opptaksomrader_RHF$PERSONER, big.mark = " ", scientific = FALSE))) %>%
leaflet::addLegend("bottomright", pal = pal_RHF, values = as.factor(opptaksomrader_RHF$NAVN_RHF), opacity = 1)
opptaksomrader_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_2022.parquet") %>%
sf::st_transform(4326)
ssb_farger <- klassR::GetKlass(614, output_style = "wide") %>%
dplyr::rename(farge_nummer = code3,
HEX = name3,
farge = name2,
type = name1) %>%
dplyr::select(-code1, -code2) %>%
dplyr::filter(farge != "Hvit")
ggplot() +
geom_sf(data = opptaksomrader_RHF)
pal_RHF <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_RHF$NAVN_RHF))
opptaksomrader_RHF_leaflet <- leaflet::leaflet(options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_RHF,
# color = "green",
weight = 1,
fillColor = pal_RHF(opptaksomrader_RHF$NAVN_RHF),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_RHF$NAVN_RHF, " / Befolkning: ", prettyNum(opptaksomrader_RHF$PERSONER, big.mark = " ", scientific = FALSE))) %>%
leaflet::addLegend("bottomright", pal = pal_RHF, values = as.factor(opptaksomrader_RHF$NAVN_RHF), opacity = 1)
opptaksomrader_RHF_leaflet
usethis::use_pkgdown() # OBS: docs legges i .gitignore (må fjernes)
devtools::build_vignettes()
tools::buildVignettes(dir = ".", tangle=TRUE)
opptaksomrader_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_HF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_HF_2022.parquet") %>%
sf::st_transform(4326)
pal_HF <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_HF$NAVN_HF))
opptaksomrader_HF_leaflet <- leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_HF,
# color = "green",
weight = 1,
fillColor = pal_HF(opptaksomrader_HF$NAVN_HF),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_HF$NAVN_HF, " / Befolkning: ", prettyNum(opptaksomrader_HF$PERSONER, big.mark = " ", scientific = FALSE))) %>%
leaflet::addLegend("bottomright", pal = pal_HF, values = as.factor(opptaksomrader_HF$NAVN_HF), opacity = 1)
opptaksomrader_HF_leaflet
opptaksomrader_lokasjon <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_lokasjon_2022.parquet") %>%
sf::st_transform(4326)
pal_lokasjon <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_HF$OPPTAK))
opptaksomrader_lokasjon <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_lokasjon_2022.parquet") %>%
sf::st_transform(4326)
pal_lokasjon <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_HF$OPPTAK))
opptaksomrader_lokasjon_leaflet <- leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_lokasjon,
# color = "green",
weight = 1,
fillColor = pal_HF(opptaksomrader_lokasjon$OPPTAK),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_lokasjon$OPPTAK, " / Befolkning: ", prettyNum(opptaksomrader_lokasjon$PERSONER, big.mark = " ", scientific = FALSE))) %>%
leaflet::addLegend("bottomright", pal = pal_HF, values = as.factor(opptaksomrader_lokasjon$OPPTAK), opacity = 1)
opptaksomrader_lokasjon <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_lokasjon_2022.parquet") %>%
sf::st_transform(4326)
pal_lokasjon <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_lokasjon$OPPTAK))
opptaksomrader_lokasjon_leaflet <- leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_lokasjon,
# color = "green",
weight = 1,
fillColor = pal_HF(opptaksomrader_lokasjon$OPPTAK),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_lokasjon$OPPTAK, " / Befolkning: ", prettyNum(opptaksomrader_lokasjon$PERSONER, big.mark = " ", scientific = FALSE))) %>%
leaflet::addLegend("bottomright", pal = pal_HF, values = as.factor(opptaksomrader_lokasjon$OPPTAK), opacity = 1)
opptaksomrader_lokasjon <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_lokasjon_2022.parquet") %>%
sf::st_transform(4326)
pal_lokasjon <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_lokasjon$OPPTAK))
opptaksomrader_lokasjon_leaflet <- leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_lokasjon,
weight = 1,
fillColor = pal_lokasjon(opptaksomrader_lokasjon$OPPTAK),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_lokasjon$OPPTAK, " / Befolkning: ", prettyNum(opptaksomrader_lokasjon$PERSONER, big.mark = " ", scientific = FALSE))) %>%
leaflet::addLegend("bottomright", pal = pal_HF, values = as.factor(opptaksomrader_lokasjon$OPPTAK), opacity = 1)
opptaksomrader_lokasjon_leaflet
opptaksomrader_lokasjon <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_lokasjon_2022.parquet") %>%
sf::st_transform(4326)
pal_lokasjon <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_lokasjon$OPPTAK))
opptaksomrader_lokasjon_leaflet <- leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_lokasjon,
weight = 1,
fillColor = pal_lokasjon(opptaksomrader_lokasjon$OPPTAK),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_lokasjon$OPPTAK, " / Befolkning: ", prettyNum(opptaksomrader_lokasjon$PERSONER, big.mark = " ", scientific = FALSE))) %>%
leaflet::addLegend("bottomright", pal = pal_lokasjon, values = as.factor(opptaksomrader_lokasjon$OPPTAK), opacity = 1)
opptaksomrader_lokasjon_leaflet
opptaksomrader_HF_leaflet <- leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addLegend("bottomright", pal = pal_HF, values = as.factor(opptaksomrader_HF$NAVN_HF), opacity = 1)
leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addLegend("bottomright", pal = pal_HF, values = as.factor(opptaksomrader_HF$NAVN_HF), opacity = 1)
leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addLegend("bottomright", pal = pal_HF, values = as.factor(opptaksomrader_HF$NAVN_HF), opacity = 1)
leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addLegend(pal = pal_HF, values = as.factor(opptaksomrader_HF$NAVN_HF), opacity = 1)
?leaflet::addLegend
leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addLegend("bottomright", pal = pal_HF, values = as.factor(opptaksomrader_HF$NAVN_HF), opacity = 1)
leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
# leaflet::addTiles()
leaflet::addLegend("bottomright", pal = pal_HF, values = as.factor(opptaksomrader_HF$NAVN_HF), opacity = 1)
leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
# leaflet::addTiles()
leaflet.extras::setMapWidgetStyle(list(background= "white")) %>%
leaflet::addLegend("bottomright", pal = pal_HF, values = as.factor(opptaksomrader_HF$NAVN_HF), opacity = 1)
install.packages("leaflet.extras")
leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
# leaflet::addTiles()
leaflet.extras::setMapWidgetStyle(list(background= "white")) %>%
leaflet::addLegend("bottomright", pal = pal_HF, values = as.factor(opptaksomrader_HF$NAVN_HF), opacity = 1)
?leaflet::addLegend
opptaksomrader_PHV_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_PHV_RHF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_PHV_RHF_leaflet <- leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_PHV_RHF,
# color = "green",
weight = 1,
fillColor = pal_RHF(opptaksomrader_PHV_RHF$NAVN_RHF),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_PHV_RHF$NAVN_RHF, " / Befolkning: ", prettyNum(opptaksomrader_PHV_RHF$PERSONER, big.mark = " ", scientific = FALSE))) %>%
leaflet::addLegend("bottomright", pal = pal_RHF, values = as.factor(opptaksomrader_PHV_RHF$NAVN_RHF), opacity = 1)
opptaksomrader_PHV_RHF_leaflet
opptaksomrader_TSB_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_TSB_RHF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_TSB_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_TSB_HF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_DPS_DPS <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_DPS_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_DPS_DPS <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_DPS_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_DPS_DPS <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_DPS_2022.parquet") %>%
sf::st_transform(4326)
pal_DPS <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_DPS_DPS$OPPTAK))
opptaksomrader_DPS_DPS <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_DPS_2022.parquet") %>%
sf::st_transform(4326)
pal_DPS <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_DPS_DPS$OPPTAK))
opptaksomrader_DPS_lokasjon_leaflet <- leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_DPS_DPS,
weight = 1,
fillColor = pal_lokasjon(opptaksomrader_DPS_DPS$OPPTAK),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_DPS_DPS$OPPTAK, " / Befolkning: ", prettyNum(opptaksomrader_DPS_DPS$PERSONER, big.mark = " ", scientific = FALSE)))
opptaksomrader_DPS_DPS <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_DPS_2022.parquet") %>%
sf::st_transform(4326)
pal_DPS <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_DPS_DPS$OPPTAK))
opptaksomrader_DPS_lokasjon_leaflet <- leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_DPS_DPS,
weight = 1,
fillColor = pal_DPS(opptaksomrader_DPS_DPS$OPPTAK),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_DPS_DPS$OPPTAK, " / Befolkning: ", prettyNum(opptaksomrader_DPS_DPS$PERSONER, big.mark = " ", scientific = FALSE)))
opptaksomrader_DPS_lokasjon_leaflet
library(tidyverse)
Sys.setlocale("LC_ALL","no_NB.utf8")
# filsti <- "C:/Users/rdn/Documents/Kart/isochrones_Kristiansund/isochrones_Kristiansund_isochrones_to_5_300_isochrones_to_5_300.parquet"
filsti <- "C:/Users/rdn/Documents/Kart/isochrones_Kristiansund_2022/isochrones_Kristiansund_2022_vegnett_isochrones_5_300_vegnett_isochrones_5_300.parquet"
ds <- arrow::open_dataset(filsti)
test <- ds %>%
# dplyr::filter(Fødeinstitusjon %in% c("Kristiansund sjukehus", "St. Olavs hospital", "Molde sjukehus")) %>%
sfarrow::read_sf_dataset()
unique(test$Fødeinstitusjon)
alle <- data.frame()
for (i in 5:30) {
alle_1 <- test %>%
data.frame() %>%
filter(isochrone <= i) %>%
dplyr::group_by(Fødeinstitusjon) %>%
dplyr::summarise(geometry = sf::st_union(sf::st_make_valid(geometry)))
alle <- rbind(alle_1, alle)
}
alle
intervaller <- seq(from = 15, to = 30, by = 15)
intervaller
alle <- data.frame()
for (i in intervaller) {
print(i)
alle_1 <- test %>%
data.frame() %>%
filter(isochrone <= i) %>%
dplyr::group_by(Fødeinstitusjon) %>%
dplyr::summarise(geometry = sf::st_union(sf::st_make_valid(geometry))) %>%
dplyr::mutate(minutter = i)
alle <- rbind(alle_1, alle)
}
alle
alle <- data.frame()
for (i in intervaller) {
print(i)
alle_1 <- test %>%
# data.frame() %>%
filter(isochrone <= i) %>%
dplyr::group_by(Fødeinstitusjon) %>%
dplyr::summarise(geometry = sf::st_union(sf::st_make_valid(geometry))) %>%
dplyr::mutate(isochrone = i)
alle <- rbind(alle_1, alle)
}
alle <- rbind(alle, alle_1)
alle <- data.frame()
for (i in intervaller) {
print(i)
alle_1 <- test %>%
# data.frame() %>%
filter(isochrone <= i) %>%
dplyr::group_by(Fødeinstitusjon) %>%
dplyr::summarise(geometry = sf::st_union(sf::st_make_valid(geometry))) %>%
dplyr::mutate(isochrone = i)
alle <- rbind(alle, alle_1)
}
alle
test_1 <- alle %>%
dplyr::filter(Fødeinstitusjon == "Kristiansund sjukehus",
isochrone == 30) %>%
sf::st_transform(crs = 4326)
leaflet::leaflet(test_1) %>%
leaflet::addTiles() %>%
leaflet::addPolylines()
test_1 <- alle %>%
dplyr::filter(Fødeinstitusjon == "Kristiansund sjukehus",
isochrone == 15) %>%
sf::st_transform(crs = 4326)
leaflet::leaflet(test_1) %>%
leaflet::addTiles() %>%
leaflet::addPolylines()
test_1 <- alle %>%
dplyr::filter(Fødeinstitusjon == "Kristiansund sjukehus",
isochrone == 30) %>%
sf::st_transform(crs = 4326)
leaflet::leaflet(test_1) %>%
leaflet::addTiles() %>%
leaflet::addPolylines()
# intervaller <- seq(from = 15, to = 30, by = 15)
intervaller <- seq(from = 15, to = 210, by = 15)
intervaller
# intervaller <- seq(from = 15, to = 30, by = 15)
intervaller <- seq(from = 15, to = 210, by = 15)
alle <- data.frame()
for (i in intervaller) {
print(i)
alle_1 <- test %>%
# data.frame() %>%
filter(isochrone <= i) %>%
dplyr::group_by(Fødeinstitusjon) %>%
dplyr::summarise(geometry = sf::st_union(sf::st_make_valid(geometry))) %>%
dplyr::mutate(isochrone = i)
alle <- rbind(alle, alle_1)
}
test_1 <- alle %>%
dplyr::filter(Fødeinstitusjon == "Kristiansund sjukehus",
isochrone == 210) %>%
sf::st_transform(crs = 4326)
leaflet::leaflet(test_1) %>%
leaflet::addTiles() %>%
leaflet::addPolylines()
colnames(alle)
sf::write_sf(alle, "C:/Users/rdn/Documents/Kart/isochrones_Kristiansund_2022/isochrones_vegnett_15_210.shp")
test_1 <- alle %>%
dplyr::filter(Fødeinstitusjon == "Kristiansund sjukehus",
isochrone == 210) %>%
sf::st_transform(crs = 4326)
leaflet::leaflet(test_1) %>%
leaflet::addTiles() %>%
leaflet::addPolylines()
opptaksomrader_DPS_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_RHF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_DPS_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_HF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_DPS_HF_leaflet <- leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_DPS_HF,
# color = "green",
weight = 1,
fillColor = pal_HF(opptaksomrader_DPS_HF$NAVN_HF),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_DPS_HF$NAVN_HF, " / Befolkning: ", prettyNum(opptaksomrader_DPS_HF$PERSONER, big.mark = " ", scientific = FALSE)))
library(tidyverse)
# SOM
opptaksomrader_SOM_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_RHF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_SOM_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_HF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_SOM_lokasjon <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_SOM_lokasjon_2022.parquet") %>%
sf::st_transform(4326)
# PHV
opptaksomrader_PHV_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_PHV_RHF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_PHV_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_PHV_HF_2022.parquet") %>%
sf::st_transform(4326)
# TSB
opptaksomrader_TSB_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_TSB_RHF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_TSB_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_TSB_HF_2022.parquet") %>%
sf::st_transform(4326)
# DPS
opptaksomrader_DPS_RHF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_RHF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_DPS_HF <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_HF_2022.parquet") %>%
sf::st_transform(4326)
opptaksomrader_DPS_DPS <- sfarrow::st_read_parquet("C:/Users/rdn/Documents/Kart/Opptaksomrade HF/opptaksomrader_DPS_DPS_2022.parquet") %>%
sf::st_transform(4326)
pal_HF <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_SOM_HF$NAVN_HF))
opptaksomrader_DPS_HF_leaflet <- leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_DPS_HF,
# color = "green",
weight = 1,
fillColor = pal_HF(opptaksomrader_DPS_HF$NAVN_HF),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_DPS_HF$NAVN_HF, " / Befolkning: ", prettyNum(opptaksomrader_DPS_HF$PERSONER, big.mark = " ", scientific = FALSE)))
pal_HF <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_SOM_HF$NAVN_HF))
ssb_farger <- klassR::GetKlass(614, output_style = "wide") %>%
dplyr::rename(farge_nummer = code3,
HEX = name3,
farge = name2,
type = name1) %>%
dplyr::select(-code1, -code2) %>%
dplyr::filter(farge != "Hvit")
pal_HF <- leaflet::colorFactor(ssb_farger$HEX, domain = as.factor(opptaksomrader_SOM_HF$NAVN_HF))
opptaksomrader_DPS_HF_leaflet <- leaflet::leaflet(height=500, width = "100%", options = leaflet::leafletOptions(zoomControl = FALSE)) %>%
leaflet::addTiles() %>%
leaflet::addPolygons(stroke = F, data = opptaksomrader_DPS_HF,
# color = "green",
weight = 1,
fillColor = pal_HF(opptaksomrader_DPS_HF$NAVN_HF),
fillOpacity = 0.5, smoothFactor = 0.5,
popup = paste0("Opptaksområde: ", opptaksomrader_DPS_HF$NAVN_HF, " / Befolkning: ", prettyNum(opptaksomrader_DPS_HF$PERSONER, big.mark = " ", scientific = FALSE)))
opptaksomrader_DPS_HF_leaflet
